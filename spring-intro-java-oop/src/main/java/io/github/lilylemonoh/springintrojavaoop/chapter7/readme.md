# 07 스프링 삼각형과 설정 정보

## 01 IoC/DI - 제어의 역전/의존성 주입

### 프로그래밍에서 의존성이란?
전체가 부분에 의존한다.프로그래밍에서 의존 관계는 new로 표현된다. 

### 스프링 없이 의존성 주입하기 1 - 생성자를 통한 의존성 주입
* 코드를 현실 세계에 비유하면 자동차가 어떤 타이어를 장착할지 고민하지 않고, 운전자가 차량을 생산할 때 어떤 타이어를 장착할지 고민하는 것.
* 의존성 주입을 적용할 경우 Car는 그저 Tire 인터페이스를 구현한 어떤 객체가 들어오기만 하면 됨

### 스프링 없이 의존성 주입하기 2 - 속성을 통한 의존성 주입
* 프로그래밍 세계에서는 속성을 통한 의존성 주입보다는 생성자를 통한 의존성 주입을 선호함

### 스프링을 통한 의존성 주입 - XML 파일 사용
(사실상 스프링부트에서 사용하지 않는 방식)

### 스프링을 통한 의존성 주입 - @Autowired를 통한 속성 주입
@Autowired는 스프링 프레임워크의 어노테이션.
스프링 프레임워크가 대신 속성을 주입해 준다. 

### 스프링을 통한 의존성 주입 - @Resource를 통한 속성 주입
@Resource는 자바 표준 어노테이션.

## 02 AOP - Aspect? 관점? 핵심 관심사? 횡단 관심사?
* AOP (Aspect-Oriented Programming) : 관점 지향 프로그래밍
* 스프링 DI가 의존성(new)에 대한 주입이라면 스프링 AOP는 로직(code) 주입
* 다수의 모듈에 공총적ㄷ으로 나타나는 부분이 존재 - 횡단 관심사

### 일단 덤벼 보자 - 실전편
* 간단하게 처리하기 위해 어노테이션을 사용한다.
  * @Aspect는 이 클래스를 이제 AOP에서 사용하겠다는 의미
  * @Before는 대상 메서드 실행 전에 이 메서드를 실행하겠다는 의미

### 일단 덤벼 보자 - 설명편
* 스프링 AOP는 프록시를 사용한다. 
* 호출하는 쪽, 호출당하는 쪽 누구도 프록시가 존재하는지 모른다. 스프링 프레임워크만 프록시의 존재를 안다.

### 일단 덤벼 보자 - 용어편
* Aspect
* Advisor
* Advice
* JoinPoint
* PointCut

### Pointcut - 자르는 지점? Aspect 적용 위치 지정자!
```java
@Before("execution(* runSomething())")
public void before(JoinPoint joinPoint){}
```
* '* runSomething()'이 바로 Pointcut이다.   
* @Before("execution(* runSomething())")은 지금 선언하고 있는 메서드를 (* runSomething) 메서드가 실행되기 전에 실행하라는 의미다.  
* 결국 Pointcut이라고 하는 것은 횡단 관심사를 적용할 타깃 메서드를 선택하는 지시자(메서드 선택 필터)이다.
* "타깃 클래스의 타깃 메서드 지정자"
* 타깃 메서드 지정자에는 정규식과 AspectJ 표현식 등을 사용할 수 있다.

### JoinPoint - 연결점? 연결 가능한 지점!
* Pointcut은 JoinPoint의 부분 집합이다. 
* PointCut의 후보가 되는 모든 메서드들이 JoinPoint, 즉 Aspect 적용이 가능한 지점이 된다. 
* 협의의 JoinPoint란 호출된 객체의 메서드다.

### Advice - 조언? 언제, 무엇을!
* Advice는 pointcut에 적용할 로직, 즉 메서드를 의미하는데, 여기에 더해 언제라는 개념까지 포함하고 있다.
* 결국 Advice란 Pointcut에 언제, 무엇을 적용할지 정의한 메서드다.

### Aspect - 관점? 측면? Advisor의 집합체!
* AOP에서 Aspect는 여러 개의 Advice와 여러 개의 Pointcut의 결합체를 의미하는 용어다.

### Advisor - 조언자? 어디서, 언제, 무엇을!
* Advisor = 한 개의 Advice + 한 개의 Pointcut

## 03 PSA - 일관성 있는 서비스 추상화
* 서비스 추상화의 예 - JDBC
* 어댑터 패턴을 적용해 같은 일을 하는 다수의 기술을 공통의 인터페이스로 제어할 수 있게 한 것